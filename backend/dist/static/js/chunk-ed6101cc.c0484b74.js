(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed6101cc"],{"4ec3":function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return m})),n.d(e,"i",(function(){return f})),n.d(e,"d",(function(){return g})),n.d(e,"f",(function(){return h})),n.d(e,"e",(function(){return b})),n.d(e,"m",(function(){return v})),n.d(e,"l",(function(){return _})),n.d(e,"k",(function(){return w})),n.d(e,"j",(function(){return k}));n("d3b7");var r=n("bc3a"),a=n.n(r),i=n("5c96"),s=n("5f87"),o=a.a.create({baseURL:"/api",timeout:5e3});o.interceptors.request.use((function(t){var e=Object(s["a"])();return e&&(t.headers.Signature=e),t}),(function(t){return console.log(t),Promise.reject(t)})),o.interceptors.response.use((function(t){var e=t.data;return 1e4!==e.code?(Object(i["Message"])({message:e.msg||"Error",type:"error",duration:5e3}),Promise.reject(new Error(e.msg||"Error"))):e}),(function(t){return console.log("err"+t),Object(i["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}));var l=o;function u(t){return l({url:"/k8s/cluster",method:"post",data:t})}function c(t){return l({url:"/k8s/cluster",method:"put",data:t})}function d(){return l({url:"/k8s/clusters",method:"get"})}function p(t){return l({url:"/k8s/workload/pods?id="+t.id,method:"get"})}function m(t){return l({url:"/k8s/sign",method:"post",data:t})}function f(){return l({url:"/users",method:"get"})}function g(t){return l({url:"/managers?page="+t.page+"&size="+t.size,method:"get"})}function h(t){return l({url:"/manager/upsert",method:"post",data:t})}function b(t){return l({url:"/manager/status",method:"post",data:t})}function v(t){return l({url:"/whites?page="+t.page+"&size="+t.size,method:"get"})}function _(t){return l({url:"/white",method:"post",data:t})}function w(t){return l({url:"/white/status",method:"post",data:t})}function k(t){return l({url:"/white",method:"delete",data:t})}},db2f:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v(" 新增 ")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{align:"center",label:"ID",width:"65","element-loading-text":"请给我点时间！"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.id))])]}}])}),n("el-table-column",{attrs:{"min-width":"300px",label:"集群简称"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.name))])]}}])}),n("el-table-column",{attrs:{width:"110px",align:"center",label:"NameSpace"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.namespaces))])]}}])}),n("el-table-column",{attrs:{width:"210px",align:"center",label:"服务地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.server))])]}}])}),n("el-table-column",{attrs:{width:"150px",align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.ctime))])]}}])}),n("el-table-column",{attrs:{width:"150px",align:"center",label:"修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.mtime))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",label:"操作",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[1===r.status?n("el-tag",{on:{click:function(e){return t.goPodList(r.id)}}},[t._v(" 获取pod列表 ")]):t._e(),t._v(" "),1===r.status?n("el-tag",{attrs:{type:"info"},on:{click:function(e){return t.statusChange(r)}}},[t._v(" 禁用 ")]):n("el-tag",{attrs:{type:"warning"},on:{click:function(e){return t.statusChange(r)}}},[t._v(" 启用 ")]),t._v(" "),n("el-tag",{attrs:{type:"success"},on:{click:function(e){return t.handleUpdate(r)}}},[t._v(" 编辑 ")])]}}])})],1),n("el-dialog",{attrs:{title:"新增/编辑",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.temp,"label-position":"left","label-width":"70px"}},[n("el-form-item",{attrs:{label:"集群简称",prop:"name"}},[n("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),n("el-form-item",{attrs:{label:"namespaces",prop:"namespaces"}},[n("el-input",{model:{value:t.temp.namespaces,callback:function(e){t.$set(t.temp,"namespaces",e)},expression:"temp.namespaces"}})],1),n("el-form-item",{attrs:{label:"服务地址",prop:"server_api"}},[n("el-input",{model:{value:t.temp.server_api,callback:function(e){t.$set(t.temp,"server_api",e)},expression:"temp.server_api"}})],1),n("el-form-item",{attrs:{label:"config",prop:"config"}},[n("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.temp.config,callback:function(e){t.$set(t.temp,"config",e)},expression:"temp.config"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.upsert()}}},[t._v(" 提交 ")])],1)],1)],1)},a=[],i=n("4ec3"),s={filters:{statusFilter:function(t){var e={1:"获取pod列表",2:"danger"};return e[t]}},props:{type:{type:String,default:"CN"}},data:function(){return{dialogFormVisible:!1,list:null,listQuery:{page:1,limit:5,type:this.type},temp:{id:0,name:"",server_api:"",namespaces:"",config:""},loading:!1}},created:function(){this.getList(),this.resetTemp()},methods:{resetTemp:function(){this.temp={id:0,name:"",server_api:"",namespaces:"",config:""}},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},handleCreate:function(){var t=this;this.resetTemp(),this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},getList:function(){var t=this;this.loading=!0,Object(i["a"])({}).then((function(e){t.list=e.data.list,t.loading=!1}))},upsert:function(){var t=this;Object(i["c"])(this.temp).then((function(e){t.getList()}))},statusChange:function(t){var e=this,n=t.status;n=1===n?2:1,Object(i["b"])({id:t.id,status:n}).then((function(t){e.getList()}))},goPodList:function(t){this.$router.push("/pods?id="+t)}}},o=s,l=n("2877"),u=Object(l["a"])(o,r,a,!1,null,null,null);e["default"]=u.exports}}]);